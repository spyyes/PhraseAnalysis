# 数据仓库大作业--频繁模式挖掘

## 1. 实验综述

关联分析常常用于从大规模数据库中寻找元素的隐含关系，是数据仓库中数据挖掘的最常用的方法。本实验旨在实现基本的数据挖掘算法（Apriori算法、FP-Growth算法），选取部分数据集数据进行挖掘。在探寻数据隐含关系的同时，试图评估数据挖掘算法的性能。

**本报告主要包括以下部分：**

1. 实验原理（包括算法详细描述、算法特点等）
2. 实验环境搭建（数据集的选取、挖掘的问题、编程环境简述）
3. 实验发现
4. 算法性能分析

**本报告的核心亮点：**

1. 实现了Apriori算法、FP-Growth算法，并进行了二者性能的比较。
2. 进行了多粒度的数据挖掘（选取了从句子到文章不同粒度的“篮子”）。
3. 进行了多数据集的应用。

##2. 实验原理

大多数关联规则挖掘算法通常采用的一种策略是，将关联规则挖掘任务分解为两个主要的子任务  -- 频繁项集产生（发现满足最小支持度阈值的所有项集），规则的产生（从上一步发现的频繁项集中提取所有高置信度的规则）。

其中，频繁项集产生所需的计算开销远大于产生规则所需的计算开销。因此，在关联规则挖掘中遇到的主要问题是加速频繁项集的产生。

在本部分中，将对本次实验选取的两个数据挖掘算法 -- Apriori算法、FP-Growth算法展开详细描述。

### 2.1 Apriori算法

Apriori算法主要基于两个定律：

**Apriori定律1**：如果一个集合是频繁项集，则它的所有子集都是频繁项集。

**Apriori定律2**：如果一个集合不是频繁项集，则它的所有超集都不是频繁项集。

 因此，可以采用层次顺序的方法来实现频繁项集的挖掘。

首先，挖掘一阶频繁项集L1，在此基础上，形成二阶候选项集；然后进行二阶频繁项集的挖掘；以此类推。主要靠“生成候选集--裁剪--计数”的流程。

算法描述如下：

```s
1 令 k=1
2 生成K阶频繁项集
3 循环直到没有频繁项集产生:
4 	从K阶频繁项集生成K+1阶频繁项集的候选集
5 	对K+1阶频繁项集的候选集进行剪枝，如果一个候选频繁项有子集不是k阶频繁项，那么这个候选频繁项也不是频繁项
6 	对K+1阶频繁项集的候选集进行筛选，挑选出符合最小支持度要求的频繁项
```

### 2.2 FP-Growth算法

FP-Growth算法主要解决了Apriori算法每次增加频繁项集的大小都要遍历整个数据库的缺点。研究表明，当数据集很大时，该算法执行速度要快于Apriori算法两个数量级。 

FP-growth算法的任务是将数据集存储在一个特定的称为FP树的结构之后，发现频繁项集或者频繁项对。FP-growth算法只需要对数据集进行两次扫描，所以即使数据集很大时也不会花费太多的时间在扫描数据上，它发现频繁项集的基本过程分为以下两个步骤： 1）构建FP树 ；2）从FP树中挖掘频繁项集

 #### 2.2.1 用FP树编码数据集

FP树通过链表链接相似元素，被连起来的元素可以看做是一个链表，如下图。

 ![img](https://img-blog.csdn.net/20160506161317874) 

FP树会存储项集出现的频率，每个项集都会以路径的形式存储在树中，存在相似元素的集合会共享树的一部分。只有当集合之间完全不同时树才会分叉，树节点上给出集合中单个元素及其在序列中出现的次数，路径会给出该序列的出现次数。 

#### 2.2.2 构建FP树

为了构建FP树，要对数据集扫描两次，第一次对所有元素项出现次数进行计数，如果一个元素不是频繁的，那么包含这个元素的超集也不是频繁的，所以不需要考虑这些超集，第二遍的扫描只考虑那些频繁元素。

需要一个头指针表来指向给定类型的第一个实例。利用头指针表可以快速访问FP树中一个给定类型的所有元素，发现相似元素项。

从空集开始，向其中不断添加频繁项集。过滤，排序后的事务依次添加到树中，如果树中已有现有元素，则增加该元素的值；如果元素不存在，则添加新分枝。 

#### 2.2.3 从FP树中挖掘频繁项

 1）从FP树中获得条件模式基；

 2）利用条件模式基，构建一个条件FP树；

 3）迭代重复步骤（1）（2）直到树只包含一个元素项为止。

##3. 实验环境搭建

本次环境选取。。。数据集进行挖掘，下面分别对各个数据集的筛选和数据预处理等进行说明。

### 3.1 Gutenburg数据集



## 4. 实验结论

在本部分，我将详细介绍我挖掘的几个问题及结论。

### 4.1 GutenBerg -- 林肯数据集的常用词挖掘

选取最小支持度为10%，发现只有两个单词入选

**数据集的筛选：**

由于数据集太过庞大，而且范围涵盖多个主题和体裁导致挖掘信息杂糅，因此我选取Gutenberg dataset中Lincoln的演讲集部分作为实验数据，并尝试从中挖掘信息。

数据集共16个文档。首先，把句子作为篮子进行数据挖掘，共30037个句子。

挖掘

#### 3.1.1 实验步骤

1. 篮子的获取：调用`nltk`工具包对数据集进行分句，收集每个句子的单词，利用停止词去除了常用介词数词等干扰词汇。

   `nltk`是一套基于`python`的自然语言处理工具集，在本次实验中只是调用其中的`tokenizer`工具进行文本分句。

2. 数据集清洗后，使用Apriori算法进行挖掘。

3. 